{% extends "admin/default.html" %}
{% block content %}
{% load static %}
{% load site_tags %}

<div class="content-wrapper">
	<section class="content-header">
		<h1>
			Edit Template
		</h1>
		<ol class="breadcrumb">
			<li><a href="{% url 'dashboard.index' %}"><i class="fa fa-dashboard"></i> Dashboard</a></li>
			<li><a href="{% url 'newsletters.index' %}">Newsletter Templates</a></li>
			<li class="active">	Edit Template</li>
		</ol>
	</section>
	<section class="content"> 
			<form method="POST" autocomplete="off" action="{% url 'newsletters.edit' ObjDetail.id %}" enctype="multipart/form-data">
				{% csrf_token %}
				<div class="row pad">
					<div class="col-md-6">
						<div class="form-group">
							<label class="mws-form-label">Subject<span class="requireRed"> * </span></label>
							<div class="mws-form-item">
								<input type="text" value="{{form.subject}}" name="subject" placeholder="Subject Name" class="form-control" />
								<span class="error-message help-inline">{{ errors.subject }}</span>
							</div>
						</div>

						<div class="form-group">
								<label class="mws-form-label">Constants</label>
								<div class="mws-form-item">
										<select id="constants" empty="Select one" class="form-control small" name="constants">
											<option value="" selected disabled hidden>Choose Constants</option>
											<option value="FIRST_NAME">FIRST_NAME</option>
											<option value="LAST_NAME">LAST_NAME</option>
											<option value="USER_NAME">USER_NAME</option>
											<option value="TO_EMAIL">TO_EMAIL</option>
											<option value="WEBSITE_URL">WEBSITE_URL</option>
											<option value="UNSUBSCRIBE_LINK">UNSUBSCRIBE_LINK</option>
										</select>
									<span class="error-message help-inline">{{ errors.constants }}</span>
								</div>
						</div>

							<div class="form-group">
								<td>
									<a onclick = "return InsertHTML()" href="javascript:void(0)" class="btn btn-success no-ajax pull-right"><i class="icon-white "></i>Insert Variable</a>
								</td>
							</div>
						
						<div class="form-group">
							<label class="mws-form-label">Email Body<span class="requireRed"> * </span></label>
							<div class="mws-form-item">
								<textarea class="form-control body" name="body">{{form.body}}</textarea>
							</div>
							<script>		
									CKEDITOR.replace("body",
									{
										height: 300,
										filebrowserImageWindowWidth : '640',
										filebrowserImageWindowHeight : '480',
										enterMode : CKEDITOR.ENTER_BR
									});
									function InsertHTML() {
										var strUser = document.getElementById("constants").value;
										if(strUser != ''){
											var newStr = '{'+strUser+'}';
											var oEditor = CKEDITOR.instances["body"] ;
											oEditor.insertHtml(newStr) ;	
										}
									}
							</script>
						</div>
					</div>
				</div>
				<div class="mws-button-row">
					<div class="input" >
						<input type="submit" value="Submit" class="btn btn-success">
							<a href="{% url 'newsletters.edit' ObjDetail.id %}" class="btn btn-primary"><i class=\"icon-refresh\"></i> Reset</a>
							<a href="{% url 'newsletters.index' %}" class="btn btn-info"><i class=\"icon-refresh\"></i> Cancel</a>
					</div>
				</div>
			</form>
	</section>
</div>
{% endblock %}
